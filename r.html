<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Redirecting...</title>
<style>
  *{box-sizing:border-box;margin:0;padding:0}
  body{
    min-height:100vh;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    background:#0d0d0d;
    color:#fff;
    font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
    text-align:center;
    padding:24px;
  }
  .icon{font-size:60px;margin-bottom:24px;animation:float 1.4s ease-in-out infinite alternate}
  @keyframes float{from{transform:translateY(0)}to{transform:translateY(-10px)}}
  h1{font-size:24px;font-weight:800;margin-bottom:8px;letter-spacing:-.03em}
  .sub{font-size:14px;color:#666;margin-bottom:32px;line-height:1.5}
  .dot{display:inline-block;width:8px;height:8px;background:#c8f53a;border-radius:50%;margin:0 3px;animation:blink 1.2s ease-in-out infinite}
  .dot:nth-child(2){animation-delay:.2s}
  .dot:nth-child(3){animation-delay:.4s}
  @keyframes blink{0%,80%,100%{opacity:.2}40%{opacity:1}}
  .stores{display:flex;gap:14px;margin-top:8px;flex-wrap:wrap;justify-content:center}
  .store-btn{
    display:flex;align-items:center;gap:10px;
    background:#1a1a1a;border:1px solid #2a2a2a;
    border-radius:14px;padding:16px 24px;
    color:white;text-decoration:none;font-size:14px;font-weight:700;
    transition:background .2s,transform .15s;
  }
  .store-btn:hover{background:#222;transform:translateY(-2px)}
  .store-btn span{font-size:26px}
  .not-found{color:#555;font-size:13px;margin-top:24px}
</style>
</head>
<body>
<div class="icon" id="icon">üì±</div>
<h1 id="app-title">Opening app...</h1>
<p class="sub" id="sub-text">
  Detecting your device<span class="dot"></span><span class="dot"></span><span class="dot"></span>
</p>
<div class="stores" id="stores"></div>
<p class="not-found" id="not-found" style="display:none">
  Automatic redirect failed. Please tap a button above.
</p>

<script>
(function(){
  var params  = new URLSearchParams(window.location.search);
  var iosUrl  = params.get('ios')     || '';
  var andUrl  = params.get('android') || '';
  var appName = params.get('n')       || 'App';
  var ua      = navigator.userAgent   || '';
  var isIOS   = /iPhone|iPad|iPod/.test(ua);
  var isAnd   = /Android/.test(ua);

  // Update page title
  document.getElementById('app-title').textContent = appName;
  document.title = appName + ' ‚Äî Redirecting...';

  // Build manual buttons (always show as fallback)
  var storesDiv = document.getElementById('stores');
  if (iosUrl) {
    var a = document.createElement('a');
    a.className = 'store-btn';
    a.href = iosUrl;
    a.innerHTML = '<span>üçé</span> App Store';
    storesDiv.appendChild(a);
  }
  if (andUrl) {
    var b = document.createElement('a');
    b.className = 'store-btn';
    b.href = andUrl;
    b.innerHTML = '<span>ü§ñ</span> Google Play';
    storesDiv.appendChild(b);
  }

  // Determine target
  var target = null;
  var iconEl = document.getElementById('icon');
  if (isIOS && iosUrl) {
    target = iosUrl;
    iconEl.textContent = 'üçé';
    document.getElementById('sub-text').innerHTML = 'iPhone detected ‚Äî opening App Store<span class="dot"></span><span class="dot"></span><span class="dot"></span>';
  } else if (isAnd && andUrl) {
    target = andUrl;
    iconEl.textContent = 'ü§ñ';
    document.getElementById('sub-text').innerHTML = 'Android detected ‚Äî opening Google Play<span class="dot"></span><span class="dot"></span><span class="dot"></span>';
  } else if (iosUrl || andUrl) {
    // Unknown device ‚Äî redirect to whichever is available
    target = iosUrl || andUrl;
  }

  if (target) {
    setTimeout(function(){ window.location.replace(target); }, 800);
  } else {
    document.getElementById('sub-text').textContent = 'Choose your platform:';
    document.getElementById('not-found').style.display = 'block';
  }
})();
</script>
</body>
</html>
